{% load static %}
<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>TODO一覧</title>
    <link rel="stylesheet" href="{% static 'work09/list_style.css' %}">
</head>

<body>

    <div class="container">

        <h2>新規TODO追加</h2>

        <form method="post">
            {% csrf_token %}
            {{ form.title }}
            {{ form.due_date }}
            <button type="submit">登録</button>
        </form>

        <h1>TODO一覧</h1>

        <table>
            <tr>
                <th>状態</th>
                <th>タイトル</th>
                <th>期限日</th>
                <th>登録日</th>
            </tr>

            {% for todo in todos %}
            <tr class="{% if not todo.is_completed and todo.due_date < today %}expired{% endif %}">
                <td>
                    {% if todo.is_completed %}完了{% else %}未完了{% endif %}
                </td>
                <td>
                    <a href="{% url 'todo_edit' todo.id %}">
                        {% if todo.is_completed %}
                        <span class="completed">{{ todo.title }}</span>
                        {% else %}
                        {{ todo.title }}
                        {% endif %}
                    </a>
                </td>
                <td>{{ todo.due_date|date:"Y年n月j日" }}</td>
                <td>{{ todo.created_at|date:"Y年n月j日 H:i" }}</td>
            </tr>
            {% endfor %}
        </table>

    </div>
</body>

</html>